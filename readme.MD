```md
---

## â™»ï¸ Shared Utility Script (`common.sh`)

To keep the Expense application automation simple and maintainable, all repeated logic is written once inside a shared file:

```

common.sh

````

Each component script (mysql, backend, frontend) imports it using:

```bash
source common.sh
````

This avoids duplicating the same code across multiple scripts and follows real DevOps engineering standards ğŸ§ 

---

## ğŸ§° What `common.sh` Handles

---

### ğŸ” Root Privilege Validation

Ensures scripts run only with administrator permissions.

**Why needed?**
Installing packages, configuring services, and writing system files require root access.

**Behavior:**

* Root user â†’ continue âœ”ï¸
* Non-root user â†’ exit immediately âŒ

Prevents partial configuration and broken environments âš ï¸

---

### ğŸ‘¤ Application User Creation

Creates the application user only if it does not already exist.

**Benefits:**

* No duplicate users
* Safe re-execution
* Maintains idempotency â™»ï¸

---

### ğŸ“œ Centralized Logging

All scripts write execution output to a standard log location:

```
/var/log/shell-expense/
```

**Advantages:**

* Easy debugging ğŸ”
* Consistent log format ğŸ“
* Track execution history ğŸ§¾

Every step prints meaningful messages instead of silent execution.

---

### âœ”ï¸ Command Status Validation

After each important command, the result is checked.

**Flow:**

* Success â†’ continue
* Failure â†’ stop script with clear error message

Avoids confusion like:

> Service installed but not working

---

### ğŸ“¦ Smart Package Installation

Reusable installer function:

* Checks if package already installed
* Installs only if missing
* Speeds up repeated runs
* Saves bandwidth â™»ï¸

---

### ğŸ§  Standard Output Messages

Scripts display uniform status messages:

* INFO â„¹ï¸
* SUCCESS âœ…
* FAILURE âŒ

This makes logs readable even for new users.

---

## ğŸ—ï¸ How Scripts Use It

Each script begins with:

```bash
source /home/ec2-user/shell-expense/common.sh
```

Then functions are directly used:

```bash
check_root
create_app_user
install_package nginx
validate $? "Installing Nginx"
```

---

## ğŸ¯ Why This Design Matters

Centralizing shared logic provides:

* Cleaner scripts âœ¨
* Easier maintenance ğŸ§¹
* Consistent behavior ğŸ“
* Safe re-execution â™»ï¸
* Production-style structure ğŸ¢

This is the same design approach used in real infrastructure automation projects.
